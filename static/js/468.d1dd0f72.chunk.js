"use strict";(self.webpackChunktwitter=self.webpackChunktwitter||[]).push([[468],{761:function(e,s,t){t.d(s,{S:function(){return r}});var r=(0,t(2791).createContext)({})},4468:function(e,s,t){t.r(s),t.d(s,{default:function(){return N}});var r=t(6871),n=t(1413),o=t(885),l=t(9062),a=t(2791),i=t(3504),c=t(3273),d=t(184);function u(){var e=(0,r.UO)().userId,s=(0,a.useState)(null),t=(0,o.Z)(s,2),u=t[0],f=t[1],m=(0,a.useState)([]),x=(0,o.Z)(m,2),h=x[0],b=x[1],p=(0,r.s0)();return(0,a.useEffect)((function(){return(0,l.cf)((0,l.JU)(c.db,"users",e),(function(e){f((0,n.Z)({id:e.id},e.data()))}))}),[e]),(0,a.useEffect)((function(){var e=void 0;if(u){var s=(0,l.IO)((0,l.hJ)(c.db,"users"),(0,l.ar)("followers","array-contains",u.userId));e=(0,l.cf)(s,(function(e){var s=[];e.forEach((function(e){s.push((0,n.Z)({id:e.id},e.data()))})),b(s)}))}return e}),[u]),(0,d.jsxs)("div",{className:"",children:[(0,d.jsxs)("div",{className:"flex font-medium text-slate-400 border-b border-gray-600",children:[(0,d.jsx)(i.OL,{to:"/p/"+e+"/followers",end:!0,className:"flex-1 hover:bg-[#1C2732] cursor-pointer text-center py-4",children:function(e){var s=e.isActive;return(0,d.jsx)("span",{className:s?"border-b-4 text-white font-bold border-blue-400 p-3 rounded-sm":void 0,children:"Followers"})}}),(0,d.jsx)(i.OL,{to:"/p/"+e+"/following",className:"flex-1 hover:bg-[#1C2732] cursor-pointer text-center py-4",children:function(e){var s=e.isActive;return(0,d.jsx)("span",{className:s?"border-b-4 text-white font-bold border-blue-400 p-3 rounded-sm":void 0,children:"Following"})}})]}),(0,d.jsx)("ul",{role:"list",className:"mt-6 ",children:h.map((function(e){return(0,d.jsxs)("li",{onClick:function(){return p("/p/".concat(e.id))},className:"flex p-4 hover:bg-[#1C2732] cursor-pointer",children:[(0,d.jsx)("img",{className:"h-10 w-10 rounded-full",src:"https://avatars.dicebear.com/api/initials/".concat(e.fullName,".svg"),alt:""}),(0,d.jsx)("div",{className:"ml-3 overflow-hidden whitespace-nowrap",children:(0,d.jsxs)("p",{className:"text-sm font-semibold",children:[e.fullName,(0,d.jsxs)("span",{className:"text-sm font-medium text-slate-400 truncate",children:[" @",e.username]})]})})]},e.id)}))})]})}function f(){var e=(0,r.UO)().userId,s=(0,a.useState)(null),t=(0,o.Z)(s,2),u=t[0],f=t[1],m=(0,a.useState)([]),x=(0,o.Z)(m,2),h=x[0],b=x[1],p=(0,r.s0)();return(0,a.useEffect)((function(){return(0,l.cf)((0,l.JU)(c.db,"users",e),(function(e){f((0,n.Z)({id:e.id},e.data()))}))}),[e]),(0,a.useEffect)((function(){var e=void 0;if(u){var s=(0,l.IO)((0,l.hJ)(c.db,"users"),(0,l.ar)("following","array-contains",u.userId));e=(0,l.cf)(s,(function(e){var s=[];e.forEach((function(e){s.push((0,n.Z)({id:e.id},e.data()))})),b(s)}))}return e}),[u]),(0,d.jsxs)("div",{className:"",children:[(0,d.jsxs)("div",{className:"flex font-medium text-slate-400 border-b border-gray-600",children:[(0,d.jsx)(i.OL,{to:"/p/"+e+"/followers",end:!0,className:"flex-1 hover:bg-[#1C2732] cursor-pointer text-center py-4",children:function(e){var s=e.isActive;return(0,d.jsx)("span",{className:s?"border-b-4 text-white font-bold border-blue-400 p-3 rounded-sm":void 0,children:"Followers"})}}),(0,d.jsx)(i.OL,{to:"/p/"+e+"/following",className:"flex-1 hover:bg-[#1C2732] cursor-pointer text-center py-4",children:function(e){var s=e.isActive;return(0,d.jsx)("span",{className:s?"border-b-4 text-white font-bold border-blue-400 p-3 rounded-sm":void 0,children:"Following"})}})]}),(0,d.jsx)("ul",{role:"list",className:"mt-6 ",children:h.map((function(e){return(0,d.jsxs)("li",{onClick:function(){return p("/p/".concat(e.id))},className:"flex p-4 hover:bg-[#1C2732] cursor-pointer",children:[(0,d.jsx)("img",{className:"h-10 w-10 rounded-full",src:"https://avatars.dicebear.com/api/initials/".concat(e.fullName,".svg"),alt:""}),(0,d.jsx)("div",{className:"ml-3 overflow-hidden whitespace-nowrap",children:(0,d.jsxs)("p",{className:"text-sm font-semibold",children:[e.fullName,(0,d.jsxs)("span",{className:"text-sm font-medium text-slate-400 truncate",children:[" @",e.username]})]})})]},e.id)}))})]})}var m=t(5861),x=t(7757),h=t.n(x),b=t(4483),p=t(3174),v=t(761);function j(){var e=(0,r.UO)().userId,s=(0,a.useState)(null),t=(0,o.Z)(s,2),u=t[0],f=t[1],x=(0,a.useState)(!1),j=(0,o.Z)(x,2),N=j[0],w=j[1],g=(0,a.useContext)(v.S),y=(0,a.useState)(!1),k=(0,o.Z)(y,2),C=k[0],Z=k[1],O=(0,r.s0)();(0,a.useEffect)((function(){return(0,l.cf)((0,l.JU)(c.db,"users",e),(function(e){f((0,n.Z)({id:e.id},e.data()))}))}),[e]),(0,a.useEffect)((function(){u&&w(u.followers.includes(g.userId))}),[u,g]);var E=(0,d.jsx)("button",{onClick:function(){return(0,c.bp)(u,g)},type:"button",className:"text-center h-10 px-6 ml-2 text-base text-black rounded-full transition font-bold bg-white hover:bg-slate-200",children:"Follow"});function U(){return(U=(0,m.Z)(h().mark((function s(){var t,r,n;return h().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=(0,l.IO)((0,l.hJ)(c.db,"rooms"),(0,l.ar)("members","array-contains",e)),s.next=3,(0,l.PL)(t);case 3:if((r=s.sent).empty){s.next=8;break}O("/messages/"+r.docs[0].id),s.next=12;break;case 8:return s.next=10,(0,l.ET)((0,l.hJ)(c.db,"rooms"),{members:[e,g.id],lastMsg:{timestamp:(0,l.Bt)()}});case 10:n=s.sent,O("/messages/"+n.id);case 12:case"end":return s.stop()}}),s)})))).apply(this,arguments)}var A=(0,d.jsx)("button",{onClick:function(){return(0,c.Qp)(u,g)},onMouseEnter:function(){Z(!0)},onMouseLeave:function(){Z(!1)},type:"button",className:"text-center h-10 px-6 ml-2 text-base text-black rounded-full transition font-bold bg-white hover:bg-transparent hover:border-2 border-pink-700 hover:text-pink-700",children:C?"Unfollow":"Following"});return(0,d.jsxs)("div",{className:"",children:[(0,d.jsx)("div",{className:"h-48 bg-gray-500 relative -z-10",children:(0,d.jsx)("img",{className:"h-28 w-28 -z-0 border border-[#15202B] transition hover:scale-105 cursor-pointer border-4 ml-4 absolute -bottom-14 object-cover rounded-full",src:"https://avatars.dicebear.com/api/initials/".concat(u&&u.fullName,".svg"),alt:"Current profile photo"})}),(0,d.jsxs)("div",{className:"flex flex-row-reverse p-4",children:[e!=g.id&&(N?A:E),e!=g.id&&(0,d.jsx)("button",{onClick:function(){return U.apply(this,arguments)},className:"transition h-10 w-10 flex items-center justify-center border border-gray-400 rounded-full hover:bg-gray-600 hover:scale-105",children:(0,d.jsx)(b.G,{className:"text-xl",icon:p.FU$})}),e==g.id&&(0,d.jsx)("div",{className:"h-10"})]}),(0,d.jsxs)("div",{className:"p-4 text-base text-left overflow-hidden",children:[(0,d.jsx)("p",{className:"font-semibold",children:u&&u.fullName}),(0,d.jsxs)("p",{className:"font-medium text-slate-400",children:["@",u&&u.username]}),(0,d.jsxs)("div",{className:"text-sm flex mt-4",children:[(0,d.jsxs)(i.rU,{to:"/p/"+e+"/following",className:"font-semibold",children:[u&&u.following.length," ",(0,d.jsx)("span",{className:"font-medium text-slate-400",children:"Following"})]}),(0,d.jsxs)(i.rU,{to:"/p/"+e+"/followers",className:"ml-4",children:[u&&u.followers.length," ",(0,d.jsx)("span",{className:"font-medium text-slate-400",children:"Followers"})]})]})]}),(0,d.jsxs)("div",{className:"flex font-medium text-slate-400 border-b border-gray-600",children:[(0,d.jsx)(i.OL,{to:"/p/"+e,end:!0,className:"flex-1 hover:bg-[#1C2732] cursor-pointer text-center py-4",children:function(e){var s=e.isActive;return(0,d.jsx)("span",{className:s?"border-b-4 text-white font-bold border-blue-400 p-3 rounded-sm":void 0,children:"Tweets"})}}),(0,d.jsx)(i.OL,{to:"likes",className:"flex-1 hover:bg-[#1C2732] cursor-pointer text-center py-4",children:function(e){var s=e.isActive;return(0,d.jsx)("span",{className:s?"border-b-4 text-white font-bold border-blue-400 p-3 rounded-sm":void 0,children:"Likes"})}})]})]})}function N(){return(0,d.jsxs)("div",{className:"",children:[(0,d.jsxs)(r.Z5,{children:[(0,d.jsx)(r.AW,{path:"*",element:(0,d.jsx)(j,{})}),(0,d.jsx)(r.AW,{path:"following",element:(0,d.jsx)(u,{})}),(0,d.jsx)(r.AW,{path:"followers",element:(0,d.jsx)(f,{})})]}),(0,d.jsx)(r.j3,{})]})}}}]);
//# sourceMappingURL=468.d1dd0f72.chunk.js.map