{"version":3,"file":"static/js/706.b3a4bfed.chunk.js","mappings":"0IAEaA,GAAcC,E,QAAAA,eAAc,K,gLCK1B,SAASC,IACtB,OAA0BC,EAAAA,EAAAA,UAAS,IAAnC,eAAOC,EAAP,KAAcC,EAAd,KACMC,GAAOC,EAAAA,EAAAA,YAAWP,EAAAA,GAClBQ,GAAWC,EAAAA,EAAAA,MAiBjB,OAhBAC,QAAQC,IAAIL,IACZM,EAAAA,EAAAA,YAAU,WACLN,IACD,iBAAC,qGACoBO,EAAAA,EAAAA,IAASP,EAAKQ,IADlC,cACOC,EADP,YAECV,EAFD,SAEgBW,QAAQC,IAAIF,EAAKG,IAAL,mCAAU,WAAMC,GAAN,gFAC/BC,EAAM,GAEVA,GAD6BA,EAA5BD,EAAIE,QAAQ,KAAOf,EAAKQ,GAAWK,EAAIE,QAAQ,GAAYF,EAAIE,QAAQ,IAC9DC,QAAQ,OAAQ,IAHS,UAIVC,EAAAA,EAAAA,KAAOC,EAAAA,EAAAA,IAAIC,EAAAA,GAAG,QAASL,IAJb,cAI7BM,EAJ6B,kCAK3BC,QAAQD,EAAWE,QAAWT,IALH,2CAAV,wDAF5B,4EAAD,KAWH,CAACb,KAGA,iBAAKuB,UAAU,SAAf,UACGzB,EAAM,GAAG,IAAG,gBAAKyB,UAAU,sBAAf,6BACb,eAAIC,KAAK,OAAOD,UAAU,QAA1B,SAEEzB,EAAMc,KAAI,SAAAC,GAAG,OACb,gBAAiBY,QAAS,kBAAIvB,EAASW,EAAIL,KAAKe,UAAU,6CAA1D,WACE,gBAAKA,UAAU,yBAAyBG,IAAY,6CAAF,OAA+Cb,EAAIQ,SAASR,EAAIQ,QAAQM,SAA7E,QAA6FC,IAAI,MAC9I,iBAAKL,UAAU,yCAAf,WACE,eAAGA,UAAU,uCAAb,WACE,4BAAOV,EAAIQ,SAASR,EAAIQ,QAAQM,SAAhC,QACA,kBAAMJ,UAAU,8CAAhB,gBAAkEV,EAAIQ,SAASR,EAAIQ,QAAQQ,SAA3F,MAAwGhB,EAAIiB,QAAQC,UAAUC,SAASC,4BAEzI,cAAGV,UAAU,yBAAb,SAAuCV,EAAIiB,QAAQI,YAP9CrB,EAAIL","sources":["UserContext.jsx","pages/Messages.jsx"],"sourcesContent":["import { createContext } from \"react\";\n\nexport const UserContext = createContext({});","import { doc, getDoc } from \"firebase/firestore\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { db, getRooms } from \"../firebase/config\";\nimport { UserContext } from \"../UserContext\";\n\n\nexport default function Messages() {\n  const [rooms, setRooms] = useState([]);\n  const user = useContext(UserContext);\n  const navigate = useNavigate();\n  console.log(user);\n  useEffect(()=>{\n    if(user){\n      (async function(){\n        const msgs = await getRooms(user.id); \n        setRooms(await Promise.all(msgs.map( async msg =>{\n          let rec = '' ;\n          (msg.members[0] !== user.id)?rec =  msg.members[0] : rec =  msg.members[1];\n          rec = rec.replace(/\\s+/g, '');\n          const reciverDoc = await getDoc(doc(db,'users', rec));\n          return {reciver:reciverDoc.data(), ...msg};\n      })));\n      })();\n    }\n\t},[user])\n\n  return (\n    <div className=\"w-full\">\n      {rooms[0]?'':<div className=\"m-4 font-bold tx-lg\">No Messages :(</div>}\n      <ul role=\"list\" className=\"mt-6 \">\n      {\n        rooms.map(msg => (\n        <li key={msg.id} onClick={()=>navigate(msg.id)} className=\"flex p-4 hover:bg-[#1C2732] cursor-pointer\">\n          <img className=\"h-10 w-10 rounded-full\" src={false||`https://avatars.dicebear.com/api/initials/${msg.reciver&&msg.reciver.fullName}.svg`} alt=\"\" />\n          <div className=\"ml-3 overflow-hidden whitespace-nowrap\">\n            <p className=\"text-sm font-semibold flex flex-wrap\">\n              <span>{msg.reciver&&msg.reciver.fullName} </span>\n              <span className=\"text-sm font-medium text-slate-400 truncate\">  @{msg.reciver&&msg.reciver.username} . {msg.lastMsg.timestamp.toDate().toLocaleDateString()}</span>\n            </p>\n            <p className=\"text-sm  mt-1 truncate\">{msg.lastMsg.text}</p>\n          </div>\n        </li>\n        ))\n      }\n\n      </ul>\n    </div>\n  )\n}\n"],"names":["UserContext","createContext","Messages","useState","rooms","setRooms","user","useContext","navigate","useNavigate","console","log","useEffect","getRooms","id","msgs","Promise","all","map","msg","rec","members","replace","getDoc","doc","db","reciverDoc","reciver","data","className","role","onClick","src","fullName","alt","username","lastMsg","timestamp","toDate","toLocaleDateString","text"],"sourceRoot":""}